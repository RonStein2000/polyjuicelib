machine:
  java:
    version: oraclejdk8
  environment:
    SBT_VERSION: 0.13.12
    SBT_OPTS: "-Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=256M"
    IVY2: "${HOME}/.ivy2"
    ARTIFACTORY_CREDENTIALS: ".credentials"
dependencies:
  cache_directories:
    - "~/.sbt"
    - "~/.m2"
    - "~/.ivy2"
  pre:
    - wget -q https://dl.bintray.com/sbt/debian/sbt-${SBT_VERSION}.deb
    - sudo dpkg -i sbt-${SBT_VERSION}.deb
    - sbt sbt-version
    - echo 'realm=Artifactory Realm' > $IVY2/$ARTIFACTORY_CREDENTIALS
    - echo 'host=vatbox.artifactoryonline.com' >> $IVY2/$ARTIFACTORY_CREDENTIALS
    - echo 'username='${ART_USER} >> $IVY2/$ARTIFACTORY_CREDENTIALS
    - echo 'passwd='${ART_KEY} >> $IVY2/$ARTIFACTORY_CREDENTIALS
  override:
    - sbt update
test:
  override:
    - sbt clean test
deployment:
  feature:
    branch: /.*/
    commands:
      - sbt publish